# p.140-156

Created: February 16, 2022 11:23 PM

✅ **Inode** 

- index-node
- 모든 파일에 일종의 번호를 붙인 것
- 해당파일 정보또한 가짐
- 파일이나 디렉토리는 고유한 inode를 가지고 있다.
- 일종의 자료구조로, 파일 구성 블록에 대한 물리적 위치 정보가 들어있다.
- 파일 링크 기능 : 심볼릭 링크/하드링크

## 리눅스 파일 시스템의 관리

1. **파일 시스템 구조** 
    
    ✔️ Boot Block 과 Block Group 들로 이루어져있음
    
    - **Boot Block** : 시스템 부팅을 위한 것. 리눅스 가동 시키기 위한 프로그램
    - **Block Group**: 아래와 같이 이루어져 있음
        1. 슈퍼 블록: 해당 파일 시스템 관련 정보 저장 (블록 수, inode 개수)
        2. Group Descriptor Table: 각 블록 그룹을 관리 , 블록 번호, 빈 블록 수, inode 수 등을 관리
        3. Block bitmap: bit 로 각 블록 사용상태를 나타냄. 사용되고 있으면 ‘1’
        4. inode: 파일 제어 정보 및 데이터 블록 포인터 저장
                   파일 이름을 제외한 해당 파일의 모든 정보를 저장
        
2. **파일 시스템의 종류** 
    1. 리눅스 전용 디스크 기반 파일 시스템
        - ext 1,2,3,4
        - ext3 부터 **‘저널링’** 지원
        - ext4 는 파일 확장자 필요없으며 특성 알려야할 때만 사용한다.
        
    2. **저널링 파일 시스템**
        - 시스템의 비정상 종료 시 저널(로그)를 이용해 안정적인 복구 가능
        - 데이터를 디스크에 쓰기 전에 로그에 남긴다
        - 저널링이 적용된 파일 시스템 : ‘JFS’ ‘XFS’ ‘ReiserFS’
        
    3. **네트워크 파일 시스템**
        - SMB : - 삼바 파일 시스템을 마운트 지정
                   - 리눅스, 유닉스와 윈도우OS와의 공유 가능
        - CIFS: - SMB 를 확장한 파일 시스템
        - NFS: - 파일 공유 및 파일 서버로 사용됨
                  - 공유된 영역을 마운트할 때 지정, 구조가 달라도 사용가능
        
    4. 기타 지원 가능한 파일 시스템 
        - FAT : 클러스터 단위로 할당 , 삼바 파일 시스템을 마운트 지정
        - VFAT : FAT 확장
        - FAT32: 다중 부팅 구성 , 32GB 보다 큰 파티션X, 4GB 초과 파일 저장X
        - NTFS : 윈도우용 파일 시스템, 2TB 한계
        - ISO 9660 : CD-ROM의 표준 파일 시스템
        - UDF : 광학 매체용 파일 시스템 표준. 대부분 DVD 에서 사용, 또는 비디오 스트림,오디오
        - HPFS : 마이크로소프트와 IBM 공동개발 ,OS/2 운영체제를 위해 만들어짐

## 관련 명령어

1. **mount 와 unmount** 
    - ‘마운트'는 특정 디바이스를 특정 디렉토리처럼 사용하기 위해 장치와 디렉토리를 연결하는 것
    - 리눅스에서는 수동으로 마운트하고 사용후에는 언마운트를 시킨다
    - mount [옵션] [디바이스명] [디렉터리명]
        - [옵션] : -t: 파일 시스템 
                    -o: 추가 설정 (읽기 전용,파티션 재마운트,동기화 등)
    
    - `파일 /etc/mtab` : 현재 마운트된 블록 시스템 정보 표시
    - 시스템 부팅 시 `파일 /etc/fstab` : 마운트 정보 참조
        
        ✅ 파일 /etc/fstab
        
        - 사용하는 파일 시스템 정보를 **정적으로 저장하고 있는 파일**
        - 시스템 정보와 부팅 시 마운트 정보를 가지고 있다.
        - [장치명][마운트위치][시스템종류][속성][dump level][파일점검옵션]
    
2. **eject** 
    - DVD, CD-ROM 등과 같은 미디어 해제 및 장치 제거
        - [옵션] : -r : 시디롬 마운트 해제 
                    -f: 플로피 ~~
    
3. **fdisk**
    - 새로운 파티션 생성,기존 것 삭제,타입 결정 작업 수행 가능
    - 한 번에 한 디스크에 대해서만 작업 수행
    - fdisk [옵션] [장치명]

1. **mkfs** 
    - 리눅스 파일 시스템 생성
    - fdik 로 하드디스크 파티션 나눈 후 , 해당 파티션에 맞는 파일시스템 생성
    - mkfs [옵션] 장치이름
        - [옵션] 
        -t 파일시스템 : 생성할 파일 시스템 타입 지정 (ext2,3,4 등)
            
            -c: 파일 시스템 생성 전, 배드블록 체크 검사
            
            -l 파일명: 파일에서 배드블록 목록 읽기
            

1. **fsck**
    - 파일 시스템의 무결성 점검, 대화식으로 복구
    - 오류에대한 저널로그 점검 → 메모리에 할당되지않은 블록들을 리스트화한 빈칸목록 점검 → 파일크기 및 디렉터리 항목 점검
    - /lost+found: 손상된 파일을 이곳으로 연결한 후 오류를 수정한다. 평소에는 null 상태로 존재.
        
                             정상적으로 복구되면 파일은 삭제된다.
        

1. **du**
    - Disk Usage
    - 디렉터리별로 디스크 사용량을 확인할 수 있다.
    - [옵션]
        - -h: 용량 단위로 표시
        - -s: 사용량 총 합계만 표시
        - -c: 모든 사용정보 보여주고 합계도 표시

1. **df** 
    - 시스템에 마운트된 하드디스크의 용량을 파티션 단위로 사용량 확인
    - 기본적으로 1024 바이트 블록단위로 출력. 옵션으로 지정 가능